<head>
  <title>PeerJS ドキュメント</title>
  <meta charset="UTF-8" />
  <meta property="og:locale" content="ja_JP" />  
  <meta name="viewport" content="width=device-width, maximum-scale=1">
  <link href='http://fonts.googleapis.com/css?family=Lato:300,400,700,900' rel='stylesheet' type='text/css'>
  <link href="./style.css" rel="stylesheet" type="text/css">
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script type="text/javascript" src="./index.js"></script>
</head>

<body>
  <section class="start">
    <h1><a href="/">PeerJS</a> <span class="title">docs</span><span class="title">SkyWay対応版</span></h1>
    <p><br>PeerJSは、WebRTCを利用したピア·ツー·ピアのデータ、ビデオ、オーディオ通信を簡単に実現することができます。このドキュメントでは、PeerJS APIの基本的な使い方を紹介します。PeerJSを用いた実装例をご覧になりたい方は, <a href="https://github.com/nttcom/peerjs/tree/master/examples">サンプル</a> ページを御覧ください。</P>
      <p>このドキュメントは、NTTコミュニケーションズが提供する<a href="http://nttcom.github.io/skyway/">クラウドサービス「SkyWay」</a>にて利用できるようにカスタマイズした<a href="https://github.com/nttcom/peerjs">PeerJS</a>を対象としています。</p>
      <h2>セットアップ</h2>
      <h3>1. PeerJSのクライアントライブラリをインクルード</h3>
      <p>PeerJSクライアントライブラリをあなたのアプリケーションにインクルードしてください。</p>
      <pre>&lt;script src="https://skyway.io/dist/0.3/peer.js"&gt;&lt;/script&gt;</pre>
      <p>PeerJSライブラリ（<a download href="https://skyway.io/dist/0.3/peer.js">peer.js</a>, <a download href="https://skyway.io/dist/0.3/peer.min.js">peer.min.js</a>）はあなたのサーバ上に設置することができます。
      ソースコードは<a href="https://github.com/nttcom/peerjs">Githubからfork</a>する事ができます。</p>
      <h3>2. Peerオブジェクトを作成</h3>
      <p>Peerオブジェクトは、Peerコネクションを生成、受信する為に利用します。</p>
      <pre>var peer = new Peer({key: 'APIKEY'});</pre>
      <p>Peerのコンストラクタに渡す'APIKEY'は、SkyWayのAPIキーです。<a
      href="http://nttcom.github.io/skypeer-website/registration.html">APIキーの申し込み</a>を行うことで無料で取得することができます。APIキー申込時には利用ドメインを申請していただきます。APIキーは申請したドメインからのみ利用可能です。</p>

      <p>PeerJSのセッション情報交換やシグナリングに利用するサーバを、自身で構築することもできます。
          詳しくは<a href="http://github.com/peers/peerjs-server">peerjs-server</a>をご覧ください。</p>
      <p>これで利用するための準備はすべて整いました！</p>

      <h2>使い方</h2>
      <p>Peerオブジェクトは生成時、ランダムなID（以下、PeerID）が付与されます。</p>
      <pre>peer.on('open', function(id) {
  console.log('My peer ID is: ' + id);
});</pre>
      <p>他のPeerと接続したい場合は、接続先のPeerIDが必要になります。
      RestAPIを利用して接続先のPeerIDを入手するか、何らかの仕組みでPeerIDを交換してください。<a href="#peer"><code>Peer</code> constructor</a>のオプションに自身のPeerIDを指定すると、この処理を省略することができます。</p>

      <p>その他の<a href="#peer-options">オプション</a>、メソッド、<a href="#peeron">イベント</a>、<a href="#peeron-error">エラー処理</a>などの詳細は、<a href="#peer">Peer API リファレンス</a>をお読みください。</p>

      <h3>Data connections</h3>
      <p>相手のPeerIDを指定して<code>peer.connect</code>を実行するとData connectionを開始します。相手から接続要求はいつでも<code>connection</code> イベントを利用して受け取ることができます。 </p>
      <div class="two-col">
        <div class="col col-header">接続開始</div>
        <div class="col col-header">接続イベントの受信</div>
        <div class="col"><pre>var conn = peer.connect('dest-peer-id');</pre></div>
        <div class="col"><pre>peer.on('connection', function(conn) { ... });</pre></div>
        <div class="clear"></div>
      </div>
      <p><code>peer.connect</code>と<code>connection</code>イベントのコールバックでは<code>DataConnection</code>オブジェクトを提供します。このオブジェクトを使用してデータの送受信を行うことができます。</p>
      <pre>conn.on('open', function() {
  // メッセージを受信
  conn.on('data', function(data) {
    console.log('Received', data);
  });

  // メッセージを送信
  conn.send('Hello!');
});</pre>
      <p>メソッドとイベントの詳細は、<a href="#dataconnection">DataConnection API リファレンス</a>をご覧ください。</p>
      <h3>Video/audio calls</h3>
      <p>相手のPeerIDを指定して<code>peer.call</code>を実行することで、その相手を呼び出すことができます。相手があなたを呼び出した場合、 <code>call</code>イベントが発生します。
      <p><code>call</code>イベントを受信した時は、必ずそのイベントに応答する必要があります。応答しなければ接続は確立しません。</p>
      <div class="two-col">
        <div class="col col-header">呼び出し開始</div>
        <div class="col col-header">呼び出しへの応答</div>
        <div class="col"><pre>// Call a peer, providing our mediaStream
var call = peer.call('dest-peer-id',
  mediaStream);

</pre></div>
        <div class="col"><pre>peer.on('call', function(call) {
  // Answer the call, providing our mediaStream
  call.answer(mediaStream);
});</pre></div>
        <div class="clear"></div>
      </div>
      <p>相手を呼び出す時、または、呼び出しに応答する時には、MediaStreamを提供する必要があります。
      MediaStreamにはビデオストリーム（ウェブカメラの映像）やオーディオストリームなどがあり、<a href="https://developer.mozilla.org/en-US/docs/Web/API/Navigator.getUserMedia"><code>navigator.getUserMedia</code></a>によって取得することができます。取得できる内容はブラウザによってことなります。
      尚、呼び出しに応答する時のMediaStreamは必須ではありません。もし応答時にMediaStreamをセットしなければ、一方向の通話が確立されます。
      通話が確立されると、<code>open</code>プロパティにtrueがセットされます。
      <p><code>peer.call</code> と <code>call</code> イベントのコールバックではMediaConnectionオブジェクトを提供します。
      MediaConnectionオブジェクトは<code>stream</code> イベントをキャッチすることができます。<code>stream</code>イベントのコールバックには相手の映像／音声ストリームが含まれます。</p>
      <pre>call.on('stream', function(stream) {
  // `stream` is the MediaStream of the remote peer.
  // Here you'd add it to an HTML video/canvas element.
});</pre>
      <p>詳しくは <a href="#mediaconnection">MediaConnection API reference</a> をご覧ください。</p>

      <h2>SkyWay RestAPIの使い方</h2>
      <h3>/active/list/<APIKEY></h3>
      <p>APIキー毎のアクティブなPeerIDを取得します。<p>
      <pre>
  Request : https://skyway.io/active/list/APIKEY
  Response : [peerid1,peerid2,peerid3,peerid4,.....]</pre>
      <h3>/active/count/<APIKEY></h3>
      <p>APIキー毎のアクティブなPeerIDの数を取得します。<p>
      <pre>
  Request : https://skyway.io/active/count/APIKEY
  Response : {"name":"active_session","count":0,"api_key":"APIKEY"}</pre>

      <p>SkyWay WebAPIはAPIキー申請時に申請していただいたドメインからのみアクセスが可能です。</p>

      <h2>FAQ</h2>

        <h3>どのような種類のデータを送ることができますか？</h3>

        <p>PeerJSは <a href="https://github.com/binaryjs/js-binarypack">BinaryPack</a>シリアライゼーションフォーマットを利用しています。JSONやバイナリBlobs、ArrayBuffersなど様々なデータを簡単な手順で送受信することができます。</p>
          <pre>
conn.send({
  strings: 'hi!',
  numbers: 150,
  arrays: [1,2,3],
  evenBinary: new Blob([1,2,3]),
  andMore: {bool: true}
});</pre>

        <h3>PeerJSを利用することができないシーンはありますか？</h3>

          <p>シンメトリックNATの内側にいるクライアント同士はNATを超えることができないため、通信することができません。
              ただし、TURNサーバを利用して接続を中継すれば回避することができます。TURNサーバは提供していないため必要であれば別途用意してください。
              TURNサーバの情報は、<code>Peer</code>オブジェクトのオプションで指定することができます。</p>
        <h3>TURNサーバはどのようにして利用するのでしょうか？</h3>
        <p>Peerオブジェクトを生成する際、オプションのiceServersにURL等の情報を設定してください。</p>
<pre>
var peer = new Peer({
  config: {'iceServers': [
    { url: 'stun:stun.skyway.io:3478' },
    { url: 'turn:homeo@turn.bistri.com:80', credential: 'homeo' }
  ]} /* Sample servers, please use appropriate ones */
});
</pre>
        <h3>現在のブラウザ対応状況は?</h3>

        　<p>WebRTC仕様との互換性並びにブラウザの対応状況は<a href="http://peerjs.com/status">こちら</a>をご覧ください。尚、SkyWay対応版のPeerJSについては、動作に差異がある可能性があります。</p>

        <h3>接続しようとしてるピアに接続できない場合はどうなりますか？</h3>

          <p>ピアに接続できない場合はPeerServerにて接続要求を5秒間保持します。ピアが一時的に再接続するような場合、コネクションを切らずに保持することができます。尚、SkyWayは現時点ではこの機能に対応していません。</p>

        <h3>ピアとつながらない場合は何を確認するべきでしょうか？</h3>
          <p>ピア同士がシンメトリックNATの内側にいる可能性があります。この場合はTURNサーバを利用してください。</p>
          <p>ファイアウォール等でUDPのポート3478（STUNサーバへの問い合わせに必要）をブロックしているかもしれません。STUNサーバへの問い合わせが可能な状況でご利用ください。</p>

        <h3>遅延／帯域幅は?</h3>
          <p>ピア同士のデータのやり取りはサーバを経由しないため、それが原因となる遅延などは発生しません。ピア同士の処理性能やネットワーク環境に依存します。</p>
          <p>ピア同士のコネクション確立に関する遅延は、セッション情報の中継（以下、シグナリング）とユーザの識別という2つに分類できます。PeerJSでは、シグナリングの時間を短縮するために、XHRストリーミングリクエストでデータを送った後、WebSocketで送ります。ユーザの識別に関しては手動でIDを指定することで、サーバ側にてIDを生成する際のRTT（Round-Trip delay Time）を短縮することができます。尚、SkyWayに関してはXHRでの接続に現時点では対応していません。</p>
        <h3>その他</h3>
          <p><a href="https://groups.google.com/forum/?fromgroups#!forum/peerjs">PeerJS Google Group(英語のみ)</a></p>
      <h3>免責事項</h3>
      <p>本ドキュメントは<a href="http://peerjs.com/docs/">http://peerjs.com/docs/</a>を元に、NTTコミュニケーションズが提供するSkyWayを利用するための情報等を追記し公開しています。ドキュメント原本に関する個別問い合わせには応じることができませんので、予めご了承ください。</p>

  </section>

  <header class="left">
    <h2>API Reference<a class="hide icon">&laquo;</a><a class="show icon">&raquo;</a></h2>
  </header>
  <header class="right">
    <h2>Getting Started</h2>
  </header>

  <section class="api">
    <div class="toplevel " id="peer"><span class="name"><a href="#peer">Peer</a><span class="tag type constructor">constructor</span><span class="snippet">var peer = new Peer([id], [options]);</span></span><p class="description">A peer can connect to other peers and listen for connections.</p><div class="children"><div class="child " id="peer-id"><span class="name"><a href="#peer-id"><span class="optional"><span class="bracket">[</span>id<span class="bracket">]</span></span></a><span class="tag type string">string</span></span><p class="description">Other peers can connect to this peer using the provided ID. If no ID is given, one will be generated by the brokering server.<span class='warn'>It's not recommended that you use this ID to identify peers, as it's meant to be used for brokering connections only. You're recommended to set the <a href='#peerconnect-options'><code>metadata</code></a> option to send other identifying information.</span></p></div><div class="child " id="peer-options"><span class="name"><a href="#peer-options"><span class="optional"><span class="bracket">[</span>options<span class="bracket">]</span></span></a><span class="tag type object">object</span></span><div class="children"><div class="child " id="peer-options-key"><span class="name"><a href="#peer-options-key">key</a><span class="tag type string">string</span></span><p class="description">API key for the cloud PeerServer. This is not used for servers other than <code>0.peerjs.com</code>.<span class='warn'>PeerServer cloud runs on port 9000. Please ensure it is not blocked or consider running your own PeerServer instead.</span></p></div><div class="child " id="peer-options-host"><span class="name"><a href="#peer-options-host">host</a><span class="tag type string">string</span></span><p class="description">Server host. Defaults to <code>0.peerjs.com</code>. Also accepts <code>'/'</code> to signify relative hostname.</p></div><div class="child " id="peer-options-port"><span class="name"><a href="#peer-options-port">port</a><span class="tag type number">number</span></span><p class="description">Server port. Defaults to <code>80</code>.</p></div><div class="child beta_030 " id="peer-options-secure"><span class="name"><a href="#peer-options-secure">secure</a><span class="tag type boolean">boolean</span><span class="tag beta_030">beta (0.3.0)</span></span><p class="description"><code>true</code> if you're using SSL.<span class='tip'>Note that our cloud-hosted server and assets may not support SSL.</span></p></div><div class="child " id="peer-options-config"><span class="name"><a href="#peer-options-config">config</a><span class="tag type object">object</span></span><p class="description">Configuration hash passed to RTCPeerConnection. This hash contains any custom ICE/TURN server configuration. Defaults to <code>{ 'iceServers': [{ 'url': 'stun:stun.l.google.com:19302' }] }</code></p></div><div class="child beta_030 " id="peer-options-debug"><span class="name"><a href="#peer-options-debug">debug</a><span class="tag type number">number</span><span class="tag beta_030">beta (0.3.0)</span></span><p class="description">Prints log messages depending on the debug level passed in. Defaults to <code>0</code>.</p><div class="children"><div class="child " id="peer-options-debug-0"><span class="name"><a href="#peer-options-debug-0">0</a></span><p class="description">Prints no logs.</p></div><div class="child " id="peer-options-debug-1"><span class="name"><a href="#peer-options-debug-1">1</a></span><p class="description">Prints only errors.</p></div><div class="child " id="peer-options-debug-2"><span class="name"><a href="#peer-options-debug-2">2</a></span><p class="description">Prints errors and warnings.</p></div><div class="child " id="peer-options-debug-3"><span class="name"><a href="#peer-options-debug-3">3</a></span><p class="description">Prints all logs.</p></div></div></div></div></div></div></div><div class="toplevel " id="peerconnect"><span class="name"><a href="#peerconnect">peer.connect</a><span class="tag type method">method</span><span class="snippet">var <a href='#dataconnection'>dataConnection</a> = peer.connect(id, [options]);</span></span><p class="description">Connects to the remote peer specified by <code>id</code> and returns a data connection. Be sure to listen on the <a href='#peeron-error'><code>error</code></a> event in case the connection fails.</p><div class="children"><div class="child " id="peerconnect-id"><span class="name"><a href="#peerconnect-id">id</a><span class="tag type string">string</span></span><p class="description">The brokering ID of the remote peer (their <a href='#peerid'><code>peer.id</code></a>).</p></div><div class="child " id="peerconnect-options"><span class="name"><a href="#peerconnect-options"><span class="optional"><span class="bracket">[</span>options<span class="bracket">]</span></span></a><span class="tag type object">object</span></span><div class="children"><div class="child " id="peerconnect-options-label"><span class="name"><a href="#peerconnect-options-label">label</a><span class="tag type string">string</span></span><p class="description">A unique label by which you want to identify this data connection. If left unspecified, a label will be generated at random. Can be accessed with <a href='#dataconnection-label'><code>dataConnection.label</code></a>.</p></div><div class="child " id="peerconnect-options-metadata"><span class="name"><a href="#peerconnect-options-metadata">metadata</a></span><p class="description">Metadata associated with the connection, passed in by whoever initiated the connection. Can be accessed with <a href='#dataconnection-metadata'><code>dataConnection.metadata</code></a>. Can be any serializable type.</p></div><div class="child " id="peerconnect-options-serialization"><span class="name"><a href="#peerconnect-options-serialization">serialization</a><span class="tag type string">string</span></span><p class="description">Can be <code>binary</code> (default), <code>binary-utf8</code>, <code>json</code>, or <code>none</code>. Can be accessed with <a href='#dataconnection-serialization'><code>dataConnection.serialization</code></a>.<span class='tip'><code>binary-utf8</code> will take a performance hit because of the way UTF8 strings are packed into binary format.</span></p></div><div class="child " id="peerconnect-options-reliable"><span class="name"><a href="#peerconnect-options-reliable">reliable</a><span class="tag type boolean">boolean</span></span><p class="description">Whether the underlying data channels should be reliable (e.g. for large file transfers) or not (e.g. for gaming or streaming). Defaults to <code>false</code>.<span class='warn'>Setting reliable to true will use a shim for incompatible browsers (Chrome 30 and below only) and thus may not offer full performance.</span></p></div></div></div></div></div><div class="toplevel beta_030 " id="peercall"><span class="name"><a href="#peercall">peer.call</a><span class="tag type method">method</span><span class="tag beta_030">beta (0.3.0)</span><span class="snippet">var <a href='#mediaconnection'>mediaConnection</a> = peer.call(id, stream);</span></span><p class="description">Calls the remote peer specified by <code>id</code> and returns a media connection. Be sure to listen on the <a href='#peeron-error'><code>error</code></a> event in case the connection fails.</p><div class="children"><div class="child " id="peercall-id"><span class="name"><a href="#peercall-id">id</a><span class="tag type string">string</span></span><p class="description">The brokering ID of the remote peer (their <a href='#peerid'><code>peer.id</code></a>).</p></div><div class="child " id="peercall-stream"><span class="name"><a href="#peercall-stream">stream</a><span class="tag type MediaStream">MediaStream</span></span><p class="description">Something else</p></div></div></div><div class="toplevel " id="peeron"><span class="name"><a href="#peeron">peer.on</a><span class="tag type method">method</span><span class="snippet">peer.on(event, callback);</span></span><p class="description">Set listeners for peer events.</p><div class="children"><div class="child " id="peeron-open"><span class="name"><a href="#peeron-open">'open'</a><span class="tag type event">event</span><span class="snippet">peer.on('open', function(id) { ... });</span></span><p class="description">Emitted when a connection to the PeerServer is established. You may use the peer before this is emitted, but messages to the server will be queued. <code>id</code> is the brokering ID of the peer (which was either provided in the constructor or assigned by the server).<span class='tip'>You should not wait for this event before connecting to other peers if connection speed is important.</span></p></div><div class="child " id="peeron-connection"><span class="name"><a href="#peeron-connection">'connection'</a><span class="tag type event">event</span><span class="snippet">peer.on('connection', function(<a href='#dataconnection'>dataConnection</a>) { ... });</span></span><p class="description">Emitted when a new data connection is established from a remote peer.</p></div><div class="child beta_030 " id="peeron-call"><span class="name"><a href="#peeron-call">'call'</a><span class="tag type event">event</span><span class="tag beta_030">beta (0.3.0)</span><span class="snippet">peer.on('call', function(<a href='#mediaconnection'>mediaConnection</a>) { ... });</span></span><p class="description">Emitted when a remote peer attempts to call you. The emitted <code>mediaConnection</code> is not yet active; you must first answer the call (<a href='#mediaconnection-answer'><code>mediaConnection.answer([stream]);</code></a>). Then, you can listen for the <a href='#mediaconnection-on'><code>stream</code></a> event.</p></div><div class="child " id="peeron-close"><span class="name"><a href="#peeron-close">'close'</a><span class="tag type event">event</span><span class="snippet">peer.on('close', function() { ... });</span></span><p class="description">Emitted when the peer is <a href='#peerdestroy'>destroyed</a>.<span class='tip'>To be extra certain that peers clean up correctly, we recommend calling <code>peer.destroy()</code> on a peer when it is no longer needed.</span></p></div><div class="child " id="peeron-error"><span class="name"><a href="#peeron-error">'error'</a><span class="tag type event">event</span><span class="snippet">peer.on('error', function(err) { ... });</span></span><p class="description">Errors on the peer are <strong>almost always fatal</strong> and will destroy the peer. Errors from the underlying socket and PeerConnections are forwarded here.<br><br>These come in the following <code>err.type</code> flavors:</p><div class="children"><div class="child fatal " id="peeron-error-browser-incompatible"><span class="name"><a href="#peeron-error-browser-incompatible">'browser-incompatible'</a><span class="tag type Error">Error</span><span class="tag fatal">fatal</span></span><p class="description">The client's browser does not support some or all WebRTC features that you are trying to use.</p></div><div class="child fatal " id="peeron-error-invalid-id"><span class="name"><a href="#peeron-error-invalid-id">'invalid-id'</a><span class="tag type Error">Error</span><span class="tag fatal">fatal</span></span><p class="description">The ID passed into the Peer constructor contains illegal characters.</p></div><div class="child fatal " id="peeron-error-invalid-key"><span class="name"><a href="#peeron-error-invalid-key">'invalid-key'</a><span class="tag type Error">Error</span><span class="tag fatal">fatal</span></span><p class="description">The API key passed into the Peer constructor contains illegal characters or is not in the system (cloud server only).</p></div><div class="child fatal " id="peeron-error-unavailable-id"><span class="name"><a href="#peeron-error-unavailable-id">'unavailable-id'</a><span class="tag type Error">Error</span><span class="tag fatal">fatal</span></span><p class="description">The ID passed into the Peer constructor is already taken.</p></div><div class="child fatal " id="peeron-error-ssl-unavailable"><span class="name"><a href="#peeron-error-ssl-unavailable">'ssl-unavailable'</a><span class="tag type Error">Error</span><span class="tag fatal">fatal</span></span><p class="description">PeerJS is being used securely, but the cloud server does not support SSL. Use a custom PeerServer.</p></div><div class="child " id="peeron-error-server-disconnected"><span class="name"><a href="#peeron-error-server-disconnected">'server-disconnected'</a><span class="tag type Error">Error</span></span><p class="description">You've already disconnected this peer and can no longer make any new connections on it.</p></div><div class="child fatal " id="peeron-error-server-error"><span class="name"><a href="#peeron-error-server-error">'server-error'</a><span class="tag type Error">Error</span><span class="tag fatal">fatal</span></span><p class="description">Unable to reach the server.</p></div><div class="child fatal " id="peeron-error-socket-error"><span class="name"><a href="#peeron-error-socket-error">'socket-error'</a><span class="tag type Error">Error</span><span class="tag fatal">fatal</span></span><p class="description">An error from the underlying socket.</p></div><div class="child fatal " id="peeron-error-socket-closed"><span class="name"><a href="#peeron-error-socket-closed">'socket-closed'</a><span class="tag type Error">Error</span><span class="tag fatal">fatal</span></span><p class="description">The underlying socket closed unexpectedly.</p></div></div></div></div></div><div class="toplevel " id="peerdisconnect"><span class="name"><a href="#peerdisconnect">peer.disconnect</a><span class="tag type method">method</span><span class="snippet">peer.disconnect();</span></span><p class="description">Close the connection to the server, leaving all existing data and media connections intact. <a href='#peerdisconnected'><code>peer.disconnected</code></a> will be set to <code>true</code>.<span class='warn'>This cannot be undone; the respective peer object will no longer be able to create or receive any connections and its ID will be forfeited on the (cloud) server.</span></p></div><div class="toplevel " id="peerdestroy"><span class="name"><a href="#peerdestroy">peer.destroy</a><span class="tag type method">method</span><span class="snippet">peer.destroy();</span></span><p class="description">Close the connection to the server and terminate all existing connections. <a href='#peerdestroyed'><code>peer.destroyed</code></a> will be set to <code>true</code>.<span class='warn'>This cannot be undone; the respective peer object will no longer be able to create or receive any connections, its ID will be forfeited on the (cloud) server, and all of its data and media connections will be closed.</span></p></div><div class="toplevel " id="peerid"><span class="name"><a href="#peerid">peer.id</a><span class="tag type string">string</span></span><p class="description">The brokering ID of this peer. If no ID was specified in <a href='#peer'>the constructor</a>, this will be <code>undefined</code> until the <a href='#peeron-open'><code>open</code></a> event is emitted.</p></div><div class="toplevel " id="peerconnections"><span class="name"><a href="#peerconnections">peer.connections</a><span class="tag type object">object</span></span><p class="description">A hash of all connections associated with this peer, keyed by the remote peer's ID.<span class='tip'>We recommend keeping track of connections yourself rather than relying on this hash.</span></p></div><div class="toplevel " id="peerdisconnected"><span class="name"><a href="#peerdisconnected">peer.disconnected</a><span class="tag type boolean">boolean</span></span><p class="description"><code>false</code> if there is an active connection to the PeerServer.</p></div><div class="toplevel " id="peerdestroyed"><span class="name"><a href="#peerdestroyed">peer.destroyed</a><span class="tag type boolean">boolean</span></span><p class="description"><code>true</code> if this peer and all of its connections can no longer be used.</p></div><div class="toplevel " id="dataconnection"><span class="name"><a href="#dataconnection">DataConnection</a><span class="tag type class">class</span></span><p class="description">Wraps WebRTC's DataChannel. To get one, use <a href='#peerconnect'><code>peer.connect</code></a> or listen for the <a href='#peeron-connect'><code>connect</code></a> event.<span class='tip'>Because Chrome currently does not support reliable messaging, PeerJS uses the <a href='https://github.com/michellebu/reliable'>Reliable shim</a> when necessary. A caveat is that with the shim you will not be able to customize <code>serialization</code> when the shim is used.</span></p><div class="children"><div class="child " id="dataconnection-send"><span class="name"><a href="#dataconnection-send">.send</a><span class="tag type method">method</span><span class="snippet">dataConnection.send(data);</span></span><p class="description"><code>data</code> is serialized by BinaryPack by default and sent to the remote peer.</p><div class="children"><div class="child " id="dataconnection-send-data"><span class="name"><a href="#dataconnection-send-data">data</a></span><p class="description">You can send any type of data, including objects, strings, and blobs.</p></div></div></div><div class="child " id="dataconnection-close"><span class="name"><a href="#dataconnection-close">.close</a><span class="tag type method">method</span><span class="snippet">dataConnection.close();</span></span><p class="description">Closes the data connection gracefully, cleaning up underlying DataChannels and PeerConnections.</p></div><div class="child " id="dataconnection-on"><span class="name"><a href="#dataconnection-on">.on</a><span class="tag type method">method</span><span class="snippet">dataConnection.on(event, callback);</span></span><p class="description">Set listeners for data connection events.</p><div class="children"><div class="child " id="dataconnection-on-data"><span class="name"><a href="#dataconnection-on-data">'data'</a><span class="tag type event">event</span><span class="snippet">dataConnection.on('data', function(data) { ... });</span></span><p class="description">Emitted when data is received from the remote peer.</p></div><div class="child " id="dataconnection-on-open"><span class="name"><a href="#dataconnection-on-open">'open'</a><span class="tag type event">event</span><span class="snippet">dataConnection.on('data', function() { ... });</span></span><p class="description">Emitted when the connection is established and ready-to-use.</p></div><div class="child " id="dataconnection-on-close"><span class="name"><a href="#dataconnection-on-close">'close'</a><span class="tag type event">event</span><span class="snippet">dataConnection.on('close', function() { ... });</span></span><p class="description">Emitted when either you or the remote peer closes the data connection.<span class='warn'>Firefox does not yet support this event.</span></p></div><div class="child " id="dataconnection-on-error"><span class="name"><a href="#dataconnection-on-error">'error'</a><span class="tag type event">event</span><span class="snippet">dataConnection.on('error', function(err) { ... });</span></span></div></div></div><div class="child " id="dataconnection-label"><span class="name"><a href="#dataconnection-label">.label</a><span class="tag type string">string</span></span><p class="description">The optional label passed in or assigned by PeerJS when the connection was initiated.</p></div><div class="child " id="dataconnection-metadata"><span class="name"><a href="#dataconnection-metadata">.metadata</a></span><p class="description">Any type of metadata associated with the connection, passed in by whoever initiated the connection.</p></div><div class="child " id="dataconnection-serialization"><span class="name"><a href="#dataconnection-serialization">.serialization</a><span class="tag type string">string</span></span><p class="description">The serialization format of the data sent over the connection. Can be <code>binary</code> (default), <code>binary-utf8</code>, <code>json</code>, or <code>none</code>.</p></div><div class="child " id="dataconnection-open"><span class="name"><a href="#dataconnection-open">.open</a><span class="tag type boolean">boolean</span></span><p class="description">This is true if the connection is open and ready for read/write.</p></div><div class="child " id="dataconnection-peer"><span class="name"><a href="#dataconnection-peer">.peer</a><span class="tag type string">string</span></span><p class="description">The ID of the peer on the other end of this connection.</p></div><div class="child " id="dataconnection-type"><span class="name"><a href="#dataconnection-type">.type</a><span class="tag type string">string</span></span><p class="description">For data connections, this is always <code>'data'</code>.</p></div></div></div><div class="toplevel beta_030 " id="mediaconnection"><span class="name"><a href="#mediaconnection">MediaConnection</a><span class="tag type class">class</span><span class="tag beta_030">beta (0.3.0)</span></span><p class="description">Wraps WebRTC's media streams. To get one, use <a href='#peercall'><code>peer.call</code></a> or listen for the <a href='#peeron-call'><code>call</code></a> event.</p><div class="children"><div class="child " id="mediaconnection-answer"><span class="name"><a href="#mediaconnection-answer">.answer</a><span class="tag type method">method</span><span class="snippet">mediaConnection.answer([stream]);</span></span><p class="description">When recieving a <a href='#peeron-call'><code>call</code></a> event on a peer, you can call <code>.answer</code> on the media connection provided by the callback to accept the call and optionally send your own media stream.</p><div class="children"><div class="child " id="mediaconnection-answer-stream"><span class="name"><a href="#mediaconnection-answer-stream"><span class="optional"><span class="bracket">[</span>stream<span class="bracket">]</span></span></a><span class="tag type MediaStream">MediaStream</span></span><p class="description">A WebRTC media stream from <a href='https://developer.mozilla.org/en-US/docs/Web/API/Navigator.getUserMedia'><code>getUserMedia</code></a>.</p></div></div></div><div class="child " id="mediaconnection-close"><span class="name"><a href="#mediaconnection-close">.close</a><span class="tag type method">method</span><span class="snippet">mediaConnection.close();</span></span><p class="description">Closes the media connection.</p></div><div class="child " id="mediaconnection-on"><span class="name"><a href="#mediaconnection-on">.on</a><span class="tag type method">method</span><span class="snippet">mediaConnection.on(event, callback);</span></span><p class="description">Set listeners for media connection events.</p><div class="children"><div class="child " id="mediaconnection-on-stream"><span class="name"><a href="#mediaconnection-on-stream">'stream'</a><span class="tag type event">event</span><span class="snippet">mediaConnection.on('stream', function(stream) { ... });</span></span><p class="description">Emitted when a remote peer adds a <code>stream</code>.</p></div><div class="child " id="mediaconnection-on-close"><span class="name"><a href="#mediaconnection-on-close">'close'</a><span class="tag type event">event</span><span class="snippet">mediaConnection.on('close', function() { ... });</span></span><p class="description">Emitted when either you or the remote peer closes the media connection.<span class='warn'>Firefox does not yet support this event.</span></p></div><div class="child " id="mediaconnection-on-error"><span class="name"><a href="#mediaconnection-on-error">'error'</a><span class="tag type event">event</span><span class="snippet">mediaConnection.on('error', function(err) { ... });</span></span></div></div></div><div class="child " id="mediaconnection-open"><span class="name"><a href="#mediaconnection-open">.open</a><span class="tag type boolean">boolean</span></span><p class="description">Whether the media connection is active (e.g. your call has been answered). You can check this if you want to set a maximum wait time for a one-sided call.</p></div><div class="child " id="mediaconnection-metadata"><span class="name"><a href="#mediaconnection-metadata">.metadata</a></span><p class="description">Any type of metadata associated with the connection, passed in by whoever initiated the connection.</p></div><div class="child " id="mediaconnection-peer"><span class="name"><a href="#mediaconnection-peer">.peer</a><span class="tag type string">string</span></span><p class="description">The ID of the peer on the other end of this connection.</p></div><div class="child " id="mediaconnection-type"><span class="name"><a href="#mediaconnection-type">.type</a><span class="tag type string">string</span></span><p class="description">For media connections, this is always <code>'media'</code>.</p></div></div></div><div class="toplevel utility " id="util"><span class="name"><a href="#util">util</a><span class="tag type object">object</span><span class="tag utility">utility</span></span><p class="description">Provides a variety of helpful utilities.<span class='warn'>Only the utilities documented here are guaranteed to be present on <code>util</code>. Undocumented utilities can be removed without warning. We don't consider these to be 'breaking changes.'</span></p><div class="children"><div class="child " id="util-browser"><span class="name"><a href="#util-browser">.browser</a><span class="tag type string">string</span><span class="snippet">if (util.browser === 'Firefox') { /* OK to peer with Firefox peers. */ }</span></span><p class="description">The current browser. This property can be useful in determining whether or not two peers can connect. For example, as of now data connections are not yet interoperable between major browsers. <code>util.browser</code> can currently have the values 'Firefox', 'Chrome', 'Unsupported', or 'Supported' (unknown WebRTC-compatible browser).</p></div><div class="child " id="util-supports"><span class="name"><a href="#util-supports">.supports</a><span class="tag type object">object</span><span class="snippet">if (util.supports.data) { /* OK to start a data connection. */ }</span></span><p class="description">A hash of WebRTC features mapped to booleans that correspond to whether the feature is supported by the current browser.<span class='warn'>Only the properties documented here are guaranteed to be present on <code>util.supports</code>.</span></p><div class="children"><div class="child " id="util-supports-audiovideo"><span class="name"><a href="#util-supports-audiovideo">.audioVideo</a><span class="tag type boolean">boolean</span></span><p class="description">True if the current browser supports media streams and PeerConnection.</p></div><div class="child " id="util-supports-data"><span class="name"><a href="#util-supports-data">.data</a><span class="tag type boolean">boolean</span></span><p class="description">True if the current browser supports DataChannel and PeerConnection.</p></div><div class="child " id="util-supports-binary"><span class="name"><a href="#util-supports-binary">.binary</a><span class="tag type boolean">boolean</span></span><p class="description">True if the current browser supports binary DataChannels.</p></div><div class="child " id="util-supports-reliable"><span class="name"><a href="#util-supports-reliable">.reliable</a><span class="tag type boolean">boolean</span></span><p class="description">True if the current browser supports reliable DataChannels.</p></div></div></div></div></div>
  </section>

</body>
